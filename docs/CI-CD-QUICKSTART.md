# DesktopPet CI/CD å¿«é€Ÿå…¥é—¨

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. ç†è§£æˆ‘ä»¬çš„ CI/CD æµç¨‹

```mermaid
graph TD
    A[å¼€å‘è€…æäº¤ä»£ç ] --> B[åˆ›å»º Pull Request]
    B --> C[è‡ªåŠ¨è¿è¡Œæµ‹è¯•]
    C --> D{æµ‹è¯•é€šè¿‡?}
    D -->|æ˜¯| E[ä»£ç å®¡æŸ¥]
    D -->|å¦| F[ä¿®å¤é—®é¢˜]
    F --> C
    E --> G[åˆå¹¶åˆ° main]
    G --> H[è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²]
    H --> I[åˆ›å»ºå‘å¸ƒç‰ˆæœ¬]
```

### 2. æ—¥å¸¸å¼€å‘æµç¨‹

#### åˆ›å»ºæ–°åŠŸèƒ½
```bash
# 1. åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯å¹¶æ›´æ–°
git checkout main
git pull origin main

# 2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/my-awesome-feature

# 3. å¼€å‘ä½ çš„åŠŸèƒ½
# ... ç¼–å†™ä»£ç  ...

# 4. æäº¤æ›´æ”¹
git add .
git commit -m "feat: add awesome feature"

# 5. æ¨é€åˆ†æ”¯
git push origin feature/my-awesome-feature
```

#### åˆ›å»º Pull Request
1. åœ¨ GitHub ä¸Šç‚¹å‡» "New Pull Request"
2. ç­‰å¾… CI æ£€æŸ¥å®Œæˆ âœ…
3. è¯·æ±‚å›¢é˜Ÿæˆå‘˜å®¡æŸ¥
4. åˆå¹¶åˆ° main åˆ†æ”¯

### 3. CI/CD ä¼šè‡ªåŠ¨åšä»€ä¹ˆï¼Ÿ

#### å½“ä½ åˆ›å»º PR æ—¶ï¼š
- âœ… ç¼–è¯‘æ£€æŸ¥
- âœ… è¿è¡Œå•å…ƒæµ‹è¯•
- âœ… ä»£ç æ ¼å¼æ£€æŸ¥
- âœ… åŸºç¡€å®‰å…¨æ‰«æ

#### å½“ä»£ç åˆå¹¶åˆ° main æ—¶ï¼š
- ğŸ”¨ å¤šå¹³å°æ„å»ºï¼ˆWindows/Linux/macOSï¼‰
- ğŸ§ª å®Œæ•´æµ‹è¯•å¥—ä»¶
- ğŸ“Š æ€§èƒ½æµ‹è¯•
- ğŸ“‹ ç”Ÿæˆæ–‡æ¡£

#### å½“ä½ åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾æ—¶ï¼š
- ğŸ“¦ æ„å»ºå‘å¸ƒç‰ˆæœ¬
- ğŸš€ åˆ›å»º GitHub Release
- ğŸ“ ä¸Šä¼ å®‰è£…åŒ…

### 4. å¦‚ä½•åˆ›å»ºå‘å¸ƒç‰ˆæœ¬

```bash
# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0

# CI ä¼šè‡ªåŠ¨ï¼š
# - æ„å»ºå‘å¸ƒç‰ˆæœ¬
# - åˆ›å»º GitHub Release
# - ä¸Šä¼  .exe æ–‡ä»¶
```

### 5. æŸ¥çœ‹ CI/CD çŠ¶æ€

#### åœ¨ GitHub ä¸Šï¼š
1. è¿›å…¥ä»“åº“é¡µé¢
2. ç‚¹å‡» "Actions" æ ‡ç­¾
3. æŸ¥çœ‹å·¥ä½œæµè¿è¡ŒçŠ¶æ€

#### å¸¸è§çŠ¶æ€ï¼š
- ğŸŸ¢ **æˆåŠŸ**ï¼šä¸€åˆ‡æ­£å¸¸
- ğŸ”´ **å¤±è´¥**ï¼šéœ€è¦ä¿®å¤é—®é¢˜
- ğŸŸ¡ **è¿›è¡Œä¸­**ï¼šæ­£åœ¨è¿è¡Œ
- âšª **è·³è¿‡**ï¼šæ¡ä»¶ä¸æ»¡è¶³

### 6. æ•…éšœæ’é™¤

#### æ„å»ºå¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ
1. ç‚¹å‡»å¤±è´¥çš„å·¥ä½œæµ
2. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
3. æœ¬åœ°é‡ç°é—®é¢˜ï¼š
   ```bash
   # æœ¬åœ°æ„å»ºæµ‹è¯•
   cmake --preset=mingw
   cmake --build --preset=mingw
   
   # è¿è¡Œæµ‹è¯•
   ctest --preset=mingw
   ```

#### æµ‹è¯•å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ
1. ç¡®ä¿æœ¬åœ°æµ‹è¯•é€šè¿‡
2. æ£€æŸ¥æµ‹è¯•æ•°æ®æ˜¯å¦æ­£ç¡®
3. ä¿®å¤ä»£ç å¹¶é‡æ–°æ¨é€

### 7. æœ€ä½³å®è·µ

#### æäº¤ä¿¡æ¯è§„èŒƒ
```bash
# å¥½çš„æäº¤ä¿¡æ¯
git commit -m "feat: add pet feeding system"
git commit -m "fix: resolve memory leak in animation"
git commit -m "docs: update README with new features"

# é¿å…çš„æäº¤ä¿¡æ¯
git commit -m "update"
git commit -m "fix bug"
git commit -m "wip"
```

#### åˆ†æ”¯å‘½å
```bash
# æ¨è
feature/pet-feeding-system
bugfix/animation-memory-leak
hotfix/critical-crash-fix

# é¿å…
my-branch
test
temp
```

### 8. æœ‰ç”¨çš„æ£€æŸ¥å·¥å…·

#### æœ¬åœ° CI æ£€æŸ¥è„šæœ¬
```bash
# Windows
.\check-ci-setup.bat

# Linux/macOS
./check-ci-setup.sh
```

#### æ‰‹åŠ¨è¿è¡Œå¸¸è§æ£€æŸ¥
```bash
# æ£€æŸ¥ä»£ç æ ¼å¼
clang-format --dry-run --Werror src/**/*.cpp

# è¿è¡Œé™æ€åˆ†æ
cppcheck --enable=all src/

# æ£€æŸ¥ CMake é…ç½®
cmake --preset=mingw --dry-run
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

- ğŸ› **é‡åˆ° Bug**ï¼šåˆ›å»º Issue
- ğŸ’¡ **æœ‰å»ºè®®**ï¼šåˆ›å»º Discussion
- ğŸ†˜ **ç´§æ€¥é—®é¢˜**ï¼šè”ç³»å›¢é˜Ÿè´Ÿè´£äºº

---

*è®°ä½ï¼šCI/CD æ˜¯æ¥å¸®åŠ©ä½ çš„ï¼Œä¸æ˜¯æ¥ä¸ºéš¾ä½ çš„ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶å¯»æ±‚å¸®åŠ©ã€‚*
